<?php $activeSlider = $this->getActiveSlider() ?>

<?php if ($activeSlider) : ?>

	<?php $images = $activeSlider->getImages() ?>

	<div>
		<a class="arrow-left" href="#"></a>
		<a class="arrow-right" href="#"></a>
		<div class="swiper-container" style="cursor: -webkit-grab;">
			<div class="swiper-wrapper">
				<?php foreach ($images as $image) : ?>
					<div class="swiper-slide">
						<div class="content-slider">
							<img src="<?= Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA) . "sm/slider/{$image->getSliderId()}/{$image->getId()}_{$image->getFilename()}" ?>">
							<?php if ($image->getTitle()) : ?>
								<h3 class="swiper-slider-title"><?= $image->getTitle() ?></h3>
							<?php endif; ?>
							<?php if ($image->getContent()) : ?>
								<p class="swiper-slider-content"><?= $image->getContent() ?></p>
							<?php endif; ?>
						</div>
					</div>
				<?php endforeach; ?>
			</div>
			<div class="pagination">
				<?php for ($i = 0; $i < $images->count(); ++$i) : ?>
					<span class="swiper-pagination-switch"></span>
				<?php endfor; ?>
			</div>
		</div>
	</div>

	<script>
		var mySwiper = new Swiper('.swiper-container',{
			autoplay: <?= Mage::getStoreConfig('sm_slider/display/autoplay') ?>,
			speed: <?= Mage::getStoreConfig('sm_slider/display/speed') ?>,
			mode: "<?= Mage::getStoreConfig('sm_slider/display/mode') ?>",
			pagination: '.pagination',
			loop: true,
			grabCursor: true,
			paginationClickable: true
		})
		$('.arrow-left').on('click', function(e){
			e.preventDefault()
			mySwiper.swipePrev()
		})
		$('.arrow-right').on('click', function(e){
			e.preventDefault()
			mySwiper.swipeNext()
		})

	</script>

<?php endif; ?>